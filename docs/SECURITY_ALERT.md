# 🚨 セキュリティアラート - R2認証情報の取り扱いについて

## 重要な注意事項

R2 APIの認証情報（Access Key IDとSecret Access Key）は**極めて機密性の高い情報**です。

### してはいけないこと

1. **認証情報を公開しない**
   - GitHubやその他の公開リポジトリにコミットしない
   - ブログ、フォーラム、SNSに投稿しない
   - スクリーンショットに含めない

2. **平文で保存しない**
   - `.env`ファイルに直接記載しない（`.env.example`のみ使用）
   - ソースコード内にハードコーディングしない
   - ドキュメントやメモに記載しない

3. **他人と共有しない**
   - メール、チャット、メッセージで送信しない
   - 共有ドキュメントに記載しない

### 推奨される取り扱い方法

1. **Wranglerシークレット**
   ```bash
   wrangler secret put R2_ACCESS_KEY_ID
   wrangler secret put R2_SECRET_ACCESS_KEY
   ```

2. **環境変数（ローカルテスト時のみ）**
   ```bash
   # 一時的に環境変数に設定（ターミナルを閉じると消える）
   export R2_ACCESS_KEY_ID="your-key"
   export R2_SECRET_ACCESS_KEY="your-secret"
   ```

3. **パスワードマネージャー**
   - 1PasswordやBitwardenなどの安全なツールで管理

### もし漏洩した場合

1. **即座に無効化**
   - Cloudflareダッシュボードで該当のAPIトークンを削除

2. **新しいトークンを作成**
   - 新しいAPIトークンを作成し、再設定

3. **影響調査**
   - R2バケットのアクセスログを確認
   - 不正なアクセスがないか確認

### ベストプラクティス

- **最小権限の原則**：必要最小限の権限のみを付与
- **定期的なローテーション**：定期的にトークンを更新
- **アクセスログの監視**：異常なアクセスパターンを監視
- **MFA（多要素認証）**：Cloudflareアカウントで有効化

## リマインダー

このプロジェクトで作業する際は、常にセキュリティを最優先に考えてください。
認証情報の適切な管理は、プロジェクトとユーザーのデータを守る最初の防衛線です。