# 実装記録ログ - 2025-06-27 生成タイミング修正

## 2025-06-27 16:45
### 作業内容
- プロンプト生成のタイミングを修正
- 画面表示時ではなく、ボタンクリック時に生成するよう変更

### 問題点
- 現在：ResultStepコンポーネントがマウントされた瞬間（useEffect）で生成リクエストを送信
- 期待：ユーザーが「生成」ボタンをクリックした時に生成リクエストを送信

### 実施内容
1. ✅ useEffectで自動生成している処理を削除（コメントアウト）
2. ✅ 生成ボタンを追加
3. ✅ 初期状態の表示を改善
4. ✅ ユーザーが明示的にアクションを起こすまでAPIリクエストを送らない

### 実装詳細
- hasGenerated状態を追加して生成済みかどうかを管理
- 初期状態では「プロンプトを生成」ボタンと設定内容のプレビューを表示
- ボタンクリックで generatePrompt() を実行
- 生成成功後に hasGenerated を true にして結果画面を表示

### 改善点
- ユーザーが意図的にボタンを押すまでAPIリクエストを送らない
- 設定内容をプレビューで確認してから生成できる
- 無駄なAPIリクエストを削減

### 次回の作業
- 実際の動作確認
- 必要に応じてUIの微調整