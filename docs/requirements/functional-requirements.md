# 機能要件書

## 1. プロンプト作成機能

### 1.1 カテゴリ選択機能
**要件ID**: FR-001
**優先度**: 高
**リリースバージョン**: 1.0

**概要**: ユーザーが作成したい画像のカテゴリを選択できる

**詳細要件**:
- 12種類のカテゴリから選択可能
  - 風景（山、海、森などの自然風景）
  - 動物（ペット、野生動物、鳥類など）
  - 人物（ポートレート、グループ、職業別など）
  - 抽象画（幾何学模様、アートなど）
  - 花（花束、単体の花、花畑など）
  - 食べ物（料理、スイーツ、飲み物など）
  - 建物（住宅、歴史的建造物、現代建築など）
  - 乗り物（車、電車、飛行機、船など）
  - ファンタジー（架空の生物、魔法の世界など）
  - 宇宙（惑星、星空、宇宙船など）
  - 物（日用品、道具、家具など）
  - 模様（パターン、テクスチャなど）

**UI/UX要件**:
- 各カテゴリに代表的なアイコンまたはサンプル画像を表示
- 選択したカテゴリは視覚的にハイライト表示（色変更＋枠線）
- ホバー時にカテゴリ名をツールチップで表示
- タッチデバイスでは長押しで説明を表示
- 自由記述欄でカスタムカテゴリの入力も可能（最大50文字）

**技術要件**:
- カテゴリデータは設定ファイルで管理（追加・変更が容易）
- 選択状態はセッション中保持
- カテゴリ変更時は確認ダイアログを表示（入力済みデータがある場合）

### 1.2 詳細選択機能
**要件ID**: FR-002
**優先度**: 高
**リリースバージョン**: 1.0

**概要**: 選択したカテゴリに応じて、詳細な要素を選択できる

**詳細要件**:
- 各カテゴリごとに12種類の詳細オプションを動的に表示
- カテゴリ変更時に詳細オプションも自動更新（アニメーション付き）
- 複数選択を可能にする（最大5個まで）
- 自由記述欄で追加の詳細を入力可能（最大100文字）

**カテゴリ別詳細オプション**:

| カテゴリ | 詳細オプション ||
|----------|----------------||
| 風景 | 山、海、森、都市、田舎、湖、砂漠、雪景色、夕焼け、夜景、滝、草原 |
| 動物 | 犬、猫、鳥、魚、馬、象、ライオン、パンダ、蝶、ウサギ、熊、キリン |
| 人物 | 子供、大人、老人、男性、女性、家族、友達、カップル、赤ちゃん、職業人、スポーツ選手、アーティスト |
| 抽象画 | 幾何学模様、流体、グラデーション、点描、線画、色彩、形状、テクスチャ、パターン、リズム、対称、非対称 |
| 花 | バラ、桜、ひまわり、チューリップ、ユリ、菊、蘭、紫陽花、コスモス、カーネーション、花束、花畑 |
| 食べ物 | 和食、洋食、中華、スイーツ、フルーツ、野菜、パン、飲み物、お弁当、お菓子、ケーキ、アイスクリーム |
| 建物 | 住宅、城、神社、寺、教会、ビル、橋、塔、学校、駅、古民家、モダン建築 |
| 乗り物 | 車、電車、飛行機、船、自転車、バイク、バス、ヘリコプター、気球、ロケット、馬車、潜水艦 |
| ファンタジー | ドラゴン、妖精、魔法使い、ユニコーン、城、魔法、エルフ、天使、悪魔、モンスター、魔法陣、異世界 |
| 宇宙 | 地球、月、太陽、星、銀河、惑星、宇宙船、宇宙飛行士、星雲、ブラックホール、流星、オーロラ |
| 物 | 時計、本、鞄、靴、眼鏡、楽器、おもちゃ、文房具、家電、家具、アクセサリー、スポーツ用品 |
| 模様 | 縞模様、水玉、チェック、花柄、幾何学、和柄、アニマル柄、ペイズリー、ボーダー、グラデーション、モザイク、迷彩 |

**UI/UX要件**:
- チェックボックス形式で複数選択可能
- 選択数が上限に達したら未選択項目を無効化
- 選択済みアイテムは色とアイコンで明示
- ドラッグ&ドロップで選択順序の変更可能

### 1.3 色選択機能
**要件ID**: FR-003

**概要**: 画像の色調を選択できる

**詳細要件**:
- 10種類のカラーパレットから選択
  - 自然な色
  - パステルカラー
  - 鮮やかな色
  - 暗い色
  - 明るい色
  - 暖色
  - 寒色
  - モノクロ
  - セピア
  - 夕焼け色
- カラーサンプルを視覚的に表示
- 自由記述で特定の色を指定可能

### 1.4 スタイル選択機能
**要件ID**: FR-004

**概要**: 画像のスタイルを選択できる

**詳細要件**:
- 12種類のスタイルから選択
  - 写真風
  - 絵画風
  - 水彩画
  - 油絵
  - 鉛筆画
  - デジタルアート
  - アニメ風
  - 漫画風
  - ポップアート
  - ミニマリスト
  - リアリスティック
  - 幻想的
- スタイルのサンプル画像を表示
- 自由記述で追加のスタイル指定可能

### 1.5 雰囲気選択機能
**要件ID**: FR-005

**概要**: 画像の雰囲気を選択できる

**詳細要件**:
- 12種類の雰囲気から選択
  - 楽しい
  - 穏やか
  - 神秘的
  - ドラマチック
  - ロマンチック
  - ノスタルジック
  - エネルギッシュ
  - 平和
  - 冒険的
  - 夢のような
  - シリアス
  - ユーモラス
- 雰囲気を表す絵文字やアイコンを使用
- 自由記述で追加の雰囲気を指定可能

### 1.6 照明選択機能
**要件ID**: FR-006

**概要**: 画像の照明効果を選択できる

**詳細要件**:
- 8種類の照明効果から選択
  - 明るい
  - 暗い
  - やわらかい
  - ハード
  - 自然光
  - 夕暮れ
  - 黄金色
  - ネオン
- 照明効果のプレビューを表示
- 自由記述で特殊な照明効果を指定可能

### 1.7 サイズ選択機能
**要件ID**: FR-007
**優先度**: 高
**リリースバージョン**: 1.0

**概要**: 生成する画像のアスペクト比を選択できる

**詳細要件**:
- 5種類のアスペクト比から選択
  - 1:1（正方形）- 推奨：Instagram投稿、小型パズル
  - 16:9（横長）- 推奨：風景画、大型パズル
  - 9:16（縦長）- 推奨：ポートレート、スマホ壁紙
  - 4:3（標準）- 推奨：一般的な写真、中型パズル
  - 3:2（写真）- 推奨：プロ写真、アート作品

**UI/UX要件**:
- 各サイズの視覚的プレビューを表示（実際の比率で）
- ジグソーパズルに適したサイズに「おすすめ」バッジを表示
- 選択時にピース数の目安を表示（300ピース、500ピース、1000ピースなど）
- サイズ変更時のアニメーション効果

**ビジネス要件**:
- パズル製造業者の規格に合わせたサイズ推奨
- 各サイズでの推定製造コストの表示（オプション）

## 2. 自動処理機能

### 2.1 自動翻訳機能
**要件ID**: FR-008

**概要**: 日本語入力を自動的に英語に翻訳する

**詳細要件**:
- 全ての自由記述欄の日本語入力を英語に翻訳
- 翻訳結果をユーザーに表示して確認可能にする
- 翻訳エラー時の適切なエラーハンドリング
- オフライン時の代替処理

### 2.2 プロンプト自動補強機能
**要件ID**: FR-009

**概要**: 高品質な画像生成のためのキーワードを自動追加

**詳細要件**:
- ポジティブプロンプトに以下のキーワードを自動追加:
  - high quality
  - detailed
  - beautiful composition
  - professional
  - 8K resolution
  - sharp focus
  - masterpiece
  - best quality
  - ultra detailed
  - photorealistic
  - cinematic lighting
  - vibrant colors
- ユーザーが自動補強のON/OFFを選択可能

### 2.3 ネガティブプロンプト自動付与機能
**要件ID**: FR-010

**概要**: 低品質要素を除外するネガティブプロンプトを自動追加

**詳細要件**:
- 以下のネガティブプロンプトを自動追加:
  - worst quality
  - low quality
  - ugly
  - bad anatomy
  - jpeg artifacts
  - out of focus
  - blurry
  - text
  - signature
  - watermark
  - bad hands
  - missing fingers
- ユーザーが自動付与のON/OFFを選択可能

## 3. 出力機能

### 3.1 プロンプト生成機能
**要件ID**: FR-011

**概要**: 選択内容と自由記述を組み合わせてプロンプトを生成

**詳細要件**:
- 全ての選択項目と自由記述を統合
- 英語プロンプトとして出力
- コピー可能なテキストボックスに表示
- ワンクリックでクリップボードにコピー

### 3.2 プロンプト履歴機能
**要件ID**: FR-012

**概要**: 過去に生成したプロンプトを保存・再利用

**詳細要件**:
- 最新10件のプロンプトを自動保存
- 保存したプロンプトを選択して再編集可能
- お気に入り登録機能
- 履歴のクリア機能

## 4. UI/UX機能

### 4.1 レスポンシブデザイン
**要件ID**: FR-013
**優先度**: 高
**リリースバージョン**: 1.0

**概要**: 様々なデバイスで快適に利用できる

**詳細要件**:
- **スマートフォン対応**
  - 画面幅: 320px〜480px
  - 縦向き/横向き自動切り替え
  - タッチターゲット最小サイズ: 44×44px
  - スワイプジェスチャー対応
- **タブレット対応**
  - 画面幅: 768px〜1024px
  - 2カラムレイアウト採用
  - ドラッグ&ドロップ対応
- **デスクトップ対応**
  - 画面幅: 1024px以上
  - 3カラムレイアウト採用
  - キーボードショートカット対応
  - マウスホバー効果

**ブレークポイント仕様**:
- Mobile: 0-767px
- Tablet: 768-1023px
- Desktop: 1024px以上

**パフォーマンス要件**:
- 初回読み込み: 3秒以内（3G接続）
- 画面切り替え: 0.3秒以内
- スムーズなアニメーション（60fps維持）

### 4.2 アクセシビリティ機能
**要件ID**: FR-014

**概要**: 障害を持つ方でも使いやすい設計

**詳細要件**:
- 大きめのボタンとタッチターゲット（最小44x44px）
- 高コントラストモード
- フォントサイズ調整機能（3段階）
- 音声読み上げ対応（スクリーンリーダー互換）
- キーボードナビゲーション対応

### 4.3 視覚的フィードバック
**要件ID**: FR-015
**優先度**: 中
**リリースバージョン**: 1.0

**概要**: 操作に対する分かりやすいフィードバック

**詳細要件**:
- **選択時のフィードバック**
  - ボタン押下: 0.1秒の縮小アニメーション
  - 選択完了: チェックマークアニメーション
  - 色変化: 選択前（グレー）→選択後（ブランドカラー）
- **進捗状況の表示**
  - プログレスバー（％表示付き）
  - ステップインジケーター（現在位置明示）
  - 残り時間の表示（翻訳処理時）
- **メッセージ表示**
  - 成功: 緑色背景、チェックアイコン、3秒後自動消去
  - 警告: 黄色背景、！アイコン、手動消去必要
  - エラー: 赤色背景、×アイコン、詳細な対処法表示
- **ツールチップ**
  - ホバー0.5秒後に表示
  - 簡潔な説明文（最大50文字）
  - アイコンの意味説明

**アニメーション仕様**:
- イージング: ease-in-out
- 継続時間: 0.3秒（標準）
- GPU アクセラレーション使用

## 5. データ管理機能（追加）

### 5.1 自動保存機能
**要件ID**: FR-016
**優先度**: 中
**リリースバージョン**: 1.1

**概要**: 作業中のデータを自動的に保存

**詳細要件**:
- 30秒ごとに自動保存
- ローカルストレージに一時保存
- ページ再読み込み時に復元
- 保存完了の控えめな通知

### 5.2 テンプレート機能
**要件ID**: FR-017
**優先度**: 低
**リリースバージョン**: 1.2

**概要**: よく使う設定をテンプレートとして保存

**詳細要件**:
- テンプレート作成・編集・削除
- カテゴリ別テンプレート管理
- 共有テンプレート機能
- インポート/エクスポート対応